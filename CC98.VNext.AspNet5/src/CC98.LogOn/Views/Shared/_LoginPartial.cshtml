@using System.Security.Claims

@{
	var cc98Identity = await Context.Authentication.AuthenticateAsync(IdentityCookieOptions.ApplicationCookieAuthenticationType);
	var zjuSsoIdentity = await Context.Authentication.AuthenticateAsync(ZjuSsoService.AuthenticationType);
}

@if (cc98Identity != null)
{
	var userName = cc98Identity.GetUserName();

	<form asp-controller="Account" asp-action="LogOff" method="post" id="logoutForm" class="navbar-right">
		<ul class="nav navbar-nav navbar-right">
			<li>
				<a asp-controller="Account" asp-action="Detail" asp-route-name="@userName">CC98 账户 <strong>@userName</strong></a>
			</li>
			<li>
				<button type="submit" class="btn btn-link navbar-btn navbar-link">注销</button>
			</li>
		</ul>
	</form>
}
else if (zjuSsoIdentity != null)
{
	<form asp-controller="ZjuSso" asp-action="LogOff" method="post" id="logoutForm" class="navbar-right">
		<ul class="nav navbar-nav navbar-right">
			<li>
				<a asp-controller="Manage" asp-action="Index" title="Manage">浙大通行证 <strong>@zjuSsoIdentity.GetUserName()</strong></a>
			</li>
			<li>
				<button type="submit" class="btn btn-link navbar-btn navbar-link">注销</button>
			</li>
		</ul>
	</form>
}
else
{
	<ul class="nav navbar-nav navbar-right">
		<li><a asp-controller="Account" asp-action="Register">注册 CC98 账号</a></li>
		<li><a asp-controller="Account" asp-action="LogOn">登录 CC98 账号</a></li>
		<li><a asp-controller="ZjuSso" asp-action="LogOn">登录浙大通行证</a></li>
	</ul>
}
